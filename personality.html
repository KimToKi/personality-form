<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>แบบประเมินบุคลิกภาพ</title>
  <style>
    body { font-family: sans-serif; margin: 20px; text-align: center; }
    table { border-collapse: collapse; margin: 20px auto; }
    th, td { border: 1px solid #999; padding: 6px; text-align: center; }
    th { background: #f2f2f2; }
    .highlight { background: #c8facc !important; }

    .matrix td {
      width: 150px; height: 120px;
      border: 1px solid #999;
      position: relative;
      vertical-align: middle;
      font-weight: bold;
    }
    .matrix td span {
      position: relative;
      z-index: 2;
    }
    .matrix td::before {
      content: "";
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-size: 70px auto;
      background-repeat: no-repeat;
      background-position: center;
      opacity: 0.15;
    }

    .matrix tr:nth-child(2) td { border-bottom: 3px solid black; }
    .matrix tr:nth-child(3) td { border-top: 3px solid black; }
    .matrix td:nth-child(2) { border-right: 3px solid black; }
    .matrix td:nth-child(3) { border-left: 3px solid black; }

    .buffalo::before { background-image: url("https://em-content.zobj.net/thumbs/240/apple/354/water-buffalo_1f403.png"); }
    .eagle::before   { background-image: url("https://em-content.zobj.net/thumbs/240/apple/354/eagle_1f985.png"); }
    .bear::before    { background-image: url("https://em-content.zobj.net/thumbs/240/apple/354/bear_1f43b.png"); }
    .mouse::before   { background-image: url("https://em-content.zobj.net/thumbs/240/apple/354/mouse-face_1f42d.png"); }
  </style>
</head>
<body>

<h2>แบบประเมินบุคลิกภาพ</h2>

<!-- ตารางกรอกข้อมูล -->
<table id="inputTable">
  <thead>
    <tr>
      <th>ผู้ประเมิน</th>
      <th>A1</th><th>A2</th><th>T1</th><th>T2</th>
      <th>C1</th><th>C2</th><th>P1</th><th>P2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ผู้ประเมิน 1</td>
      <td><input type="number" min="0"></td><td><input type="number" min="0"></td>
      <td><input type="number" min="0"></td><td><input type="number" min="0"></td>
      <td><input type="number" min="0"></td><td><input type="number" min="0"></td>
      <td><input type="number" min="0"></td><td><input type="number" min="0"></td>
    </tr>
    <tr>
      <td>ผู้ประเมิน 2</td>
      <td><input type="number" min="0"></td><td><input type="number" min="0"></td>
      <td><input type="number" min="0"></td><td><input type="number" min="0"></td>
      <td><input type="number" min="0"></td><td><input type="number" min="0"></td>
      <td><input type="number" min="0"></td><td><input type="number" min="0"></td>
    </tr>
    <tr>
      <td>ผู้ประเมิน 3</td>
      <td><input type="number" min="0"></td><td><input type="number" min="0"></td>
      <td><input type="number" min="0"></td><td><input type="number" min="0"></td>
      <td><input type="number" min="0"></td><td><input type="number" min="0"></td>
      <td><input type="number" min="0"></td><td><input type="number" min="0"></td>
    </tr>
  </tbody>
</table>

<button onclick="calculateResult()">รวมคะแนนและหาตำแหน่ง</button>

<!-- ตารางผลรวม -->
<h3>ผลรวมคะแนน</h3>
<table id="resultTable">
  <thead>
    <tr>
      <th>A1</th><th>A2</th><th>T1</th><th>T2</th>
      <th>C1</th><th>C2</th><th>P1</th><th>P2</th>
      <th>ตำแหน่ง</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td id="sumA1">0</td><td id="sumA2">0</td>
      <td id="sumT1">0</td><td id="sumT2">0</td>
      <td id="sumC1">0</td><td id="sumC2">0</td>
      <td id="sumP1">0</td><td id="sumP2">0</td>
      <td id="finalPos">-</td>
    </tr>
  </tbody>
</table>

<!-- ตารางตำแหน่งบุคลิกภาพ -->
<h3>ตารางบุคลิกภาพสัตว์</h3>
<table id="matrixTable" class="matrix">
  <tr>
    <td class="bear"><span>หมี<br>(A1-C1)</span></td>
    <td><span>A2-C1</span></td>
    <td><span>T2-C1</span></td>
    <td class="buffalo"><span>กระทิง<br>(T1-C1)</span></td>
  </tr>
  <tr>
    <td><span>A1-C2</span></td>
    <td><span>A2-C2</span></td>
    <td><span>T2-C2</span></td>
    <td><span>T1-C2</span></td>
  </tr>
  <tr>
    <td><span>A1-P2</span></td>
    <td><span>A2-P2</span></td>
    <td><span>T2-P2</span></td>
    <td><span>T1-P2</span></td>
  </tr>
  <tr>
    <td class="mouse"><span>หนู<br>(A1-P1)</span></td>
    <td><span>A2-P1</span></td>
    <td><span>T2-P1</span></td>
    <td class="eagle"><span>อินทรีย์<br>(T1-P1)</span></td>
  </tr>
</table>

<!-- JavaScript -->
<script>
function calculateResult() {
  const rows = document.querySelectorAll("#inputTable tbody tr");
  let sums = { A1:0, A2:0, T1:0, T2:0, C1:0, C2:0, P1:0, P2:0 };

  rows.forEach(row => {
    const inputs = row.querySelectorAll("input");
    let keys = ["A1","A2","T1","T2","C1","C2","P1","P2"];
    inputs.forEach((inp,i) => {
      let val = parseInt(inp.value) || 0;
      sums[keys[i]] += val;
    });
  });

  // แสดงผลรวม
  for (let key in sums) {
    document.getElementById("sum"+key).textContent = sums[key];
  }

  // กลุ่ม 1: A1, A2, T1, T2
  let group1 = ["A1","A2","T1","T2"];
  let maxVal1 = Math.max(...group1.map(k => sums[k]));
  let maxGroup1 = group1.filter(k => sums[k] === maxVal1);

  // กลุ่ม 2: C1, C2, P1, P2
  let group2 = ["C1","C2","P1","P2"];
  let maxVal2 = Math.max(...group2.map(k => sums[k]));
  let maxGroup2 = group2.filter(k => sums[k] === maxVal2);

  // สร้างตำแหน่งทั้งหมด
  let positions = [];
  maxGroup1.forEach(g1 => {
    maxGroup2.forEach(g2 => {
      positions.push(g1 + "-" + g2);
    });
  });

  // แสดงตำแหน่งทั้งหมด
  document.getElementById("finalPos").textContent = positions.join(", ");

  // ล้าง highlight เดิม
  document.querySelectorAll("#matrixTable td").forEach(td => td.classList.remove("highlight"));

  // highlight ตำแหน่ง
  positions.forEach(pos => {
    let target = Array.from(document.querySelectorAll("#matrixTable td"))
                      .find(td => td.textContent.includes(pos));
    if (target) target.classList.add("highlight");
  });
}
</script>

</body>
</html>

